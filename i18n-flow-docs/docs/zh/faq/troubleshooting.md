# 故障排除

本指南提供了使用 i18n Flow 时可能遇到的常见问题的解决方案。

## 认证问题

### 无法登录

**问题**：无法登录到管理界面。

**解决方案**：

- 验证您的用户名和密码是否正确
- 检查后端服务是否正在运行
- 清除浏览器 cookies 和缓存
- 如果使用 Docker，检查所有容器是否都在运行：`docker compose ps`

### API 密钥不工作

**问题**：CLI 命令失败并出现认证错误。

**解决方案**：

- 验证 `.i18nflowrc.json` 中的 API 密钥是否与服务器的 `.env` 文件中的匹配
- 确认服务器 URL 是否正确且可访问
- 检查您的机器与服务器之间的网络连接

## 后端问题

### 数据库连接失败

**问题**：后端服务无法连接到数据库。

**解决方案**：

- 验证 `.env` 中的数据库凭证是否正确
- 检查数据库服务是否正在运行且可访问
- 如果使用 Docker，确保数据库容器状态健康
- 检查数据库日志是否有错误

### 服务器无法启动

**问题**：后端服务器无法启动。

**解决方案**：

- 检查日志中的错误信息：`docker compose logs backend`
- 验证所有环境变量是否正确设置
- 确保所需端口未被其他应用程序占用
- 检查系统资源是否充足（内存、磁盘空间）

## 前端问题

### 空白或错误屏幕

**问题**：管理界面显示空白屏幕或错误信息。

**解决方案**：

- 检查浏览器控制台是否有 JavaScript 错误
- 验证后端 API 是否可从浏览器访问
- 清除浏览器缓存
- 尝试使用不同的浏览器

### UI 渲染问题

**问题**：UI 的元素显示不正常。

**解决方案**：

- 更新浏览器至最新版本
- 禁用可能干扰的浏览器扩展
- 尝试在隐私/无痕浏览模式下访问

## CLI 工具问题

### CLI 未检测到键

**问题**：CLI 工具在扫描时未检测到翻译键。

**解决方案**：

- 验证 `.i18nflowrc.json` 中的 `extractorPattern` 是否与代码中的翻译函数调用匹配
- 检查源文件是否包含在扫描模式中
- 使用详细日志运行：`i18n-flow push --scan --debug`

### 同步失败

**问题**：无法与服务器同步翻译。

**解决方案**：

- 检查网络连接
- 验证项目 ID 和服务器 URL 是否正确
- 确保 API 密钥具有必要的权限
- 检查服务器日志中是否有 API 错误

## 翻译管理问题

### 缺失翻译

**问题**：同步后翻译缺失。

**解决方案**：

- 验证 CLI 与服务器之间的语言代码是否匹配
- 检查翻译是否存在于服务器上
- 尝试强制同步：`i18n-flow sync --force`
- 检查本地目录中是否有文件权限问题

### 导入/导出失败

**问题**：无法导入或导出翻译。

**解决方案**：

- 验证文件格式是否受支持
- 检查文件结构是否符合预期格式
- 尝试使用较小的文件以排除大小限制问题
- 检查服务器日志获取详细错误信息

## Docker 部署问题

### 容器启动失败

**问题**：Docker 容器无法启动。

**解决方案**：

- 检查日志：`docker compose logs`
- 验证端口可用性：`netstat -tuln`
- 确保 Docker 有足够的资源
- 检查 `docker-compose.yml` 文件中是否有错误

### 卷权限问题

**问题**：容器无法写入卷。

**解决方案**：

- 检查文件所有权和权限
- 重新创建卷：`docker volume rm [volume_name]`
- 在 Docker Compose 文件中使用显式用户映射

## 性能问题

### API 响应缓慢

**问题**：API 请求花费太长时间。

**解决方案**：

- 检查服务器负载和资源
- 优化数据库查询和索引
- 考虑扩展资源或服务
- 在可能的情况下启用缓存

### 内存使用率高

**问题**：服务消耗过多内存。

**解决方案**：

- 检查内存泄漏
- 优化容器资源限制
- 考虑数据库查询优化
- 为大型数据集实现分页

## 获取帮助

如果在尝试这些故障排除步骤后仍然遇到问题：

1. 查看 [GitHub Issues](https://github.com/cerebralatlas/i18n-flow/issues) 是否有类似问题
2. 收集相关日志和错误信息
3. 创建一个新的 issue，详细说明您的设置和问题
4. 加入 [Discord/Slack] 社区讨论，获取实时帮助
